!function(e){e.fn.simpleImageUpload=function(n){var a,t=e.extend({onAfterRead:""},n),r=this,i={},o=function(n){var a=n.originalEvent.target.files||n.originalEvent.dataTransfer.files,t=1,r=null;e.each(a,function(e,n){null!==n.type.match("image.*")&&1===t?(r=n,t+=1):t>1&&console.warn("This widget will only process 1 image every time")}),null!==r&&l(r)},l=function(e){d(e).readAsDataURL(e)},d=function(n){var a=new FileReader;return a.onload=function(n){return function(a){i={source:a.target.result,file:n,name:n.name},e.isFunction(t.onAfterRead)&&t.onAfterRead(i)}}(n),a};return r.getImageFile=function(){return i},r.deleteImageFile=function(){i={},a.val("")},this.each(function(){var n=e(this);n.html('<input type="file" accept="image/*" style="display:none;"><div class="simpleImageUpload"></div>'),a=n.find("input");var t=n.find("div");a.on("change",function(e){o(e)}),t.on("drag dragstart dragend dragover dragenter dragleave drop",function(e){e.preventDefault(),e.stopPropagation()}).on("dragover dragenter",function(){t.addClass("is-dragover")}).on("dragleave dragend drop",function(){t.removeClass("is-dragover")}).on("drop",function(e){o(e)}).on("click",function(){a.trigger("click")})})}}(jQuery);